### 系统数据开放功能概述

系统数据开放功能提供了获取设备信息和控制设备功能的接口，以实现更丰富和个性化的创意主题。该功能支持锁屏、桌面和桌面万象小组件，适用于手机、平板和折叠屏设备。

### 系统数据

#### 支持的全局变量

- **systemVersion**：设备版本（字符串）。
- **storageFree**：设备可用空间（四舍五入取整，单位：G，字符串）。
- **storageFreeNum**：设备可用空间（四舍五入取整，单位：MB，数值）。
- **storageTotal**：设备总空间（四舍五入取整，单位：G，字符串）。
- **storageTotalNum**：设备总空间（四舍五入取整，单位：MB，数值）。
- **vibration**：声音模式（数值，2：响铃，1：震动，0：静音）。
- **flashlight**：手电筒开关状态（字符串，0：关闭，1：打开）。
- **automaticRotary**：自动旋转开关状态（字符串，0：关闭，1：打开）。

### 控制功能

#### 支持的命令

- **声音模式改变命令**。
- **手电筒开关命令**。
- **自动旋转开关命令**。
- **音量/亮度进度条加减命令**。

### 系统数据自定义变量

#### 设备开机时长获取

通过建立`Var`标签设置name="deviceTime"获取设备开机时长数据。

```xml
<Var name="deviceTime" assigning="dd天HH小时mm分钟"/>
<Text name="t2" color="#ffffff" format="获取开机时长:%s" paras="#deviceTime" size="50" x="100" y="500"/>
```

#### 设备开机时长轮询

设置轮询时间间隔后，将按照轮询时间间隔自动刷新设备开机时长数据。

```xml
<Var name="pollingTime" time="1"/>
<Var name="deviceTime" assigning="dd天HH小时mm分钟"/>
<Text name="t2" color="#ffffff" format="获取开机时长:%s" paras="#deviceTime" size="50" x="100" y="500"/>
```

#### CPU使用率

通过建立`Var`标签设置name="processCpuRate"获取CPU使用率数据。

```xml
<Var name="processCpuRate" bit="3"/>
<Text name="t3" color="#ffffff" format="获取CPU使用率:%s" paras="#processCpuRate" size="50" x="100" y="700"/>
```

#### CPU空闲率

通过建立`Var`标签设置name="processCpuFree"获取CPU空闲率数据。

```xml
<Var name="processCpuFree"/>
<Text name="t4" color="#ffffff" format="获取CPU空闲率:%s" paras="#processCpuFree" size="50" x="100" y="800"/>
```

### 音量/亮度进度条

包括通话音量、屏幕亮度、来电信息通知音量、音乐/视频/游戏音量和闹钟音量。

```xml
<Var name="Progress" direction="0" mode="3" topColor="#550000" bottomColor="#ff0000" bgSrc="jdt.png" iconSrc="hk.png" x="180" y="1605" w="700" h="60" progressWidth="20" iconWidth="60" iconHeight="40" roundedCorners="20"/>
```

### 系统数据控制命令

#### 声音模式改变命令

```xml
<VariableCommand name="vibration" expression="(#vibration+1)%3"/>
```

#### 手电筒开关命令

```xml
<VariableCommand name="flashlightValue" expression="#flashlightValue+1" persist="false"/>
```

```xml
<Image x="100" y="1100" w="300" h="150" src="close.png" visibility="eq(#flashlight,0)"/>
<Image x="100" y="1100" w="300" h="150" src="open.png" visibility="eq(#flashlight,1)"/>
<Button x="100" y="1100" w="300" h="150">
    <Trigger action="click">
        <VariableCommand name="flashlightValue" expression="#flashlightValue+1" persist="false"/>
    </Trigger>
</Button>
```

#### 自动旋转开关命令

```xml
<VariableCommand name="automaticRotaryValue" expression="#automaticRotaryValue+1" persist="false"/>
```

```xml
<Image x="100" y="1100" w="300" h="150" src="close.png" visibility="eq(#automaticRotary,0)"/>
<Image x="100" y="1100" w="300" h="150" src="open.png" visibility="eq(#automaticRotary,1)"/>
<Button x="100" y="1300" w="300" h="150">
    <Trigger action="click">
        <VariableCommand name="automaticRotaryValue" expression="#automaticRotaryValue+1" persist="false"/>
    </Trigger>
</Button>
```

#### 音量/亮度进度条加减命令

```xml
<ProgressCommand mode="3" change="0" amplitude="50"/>
```

```xml
<Image x="100" y="1600" w="70" h="70" src="subtraction.png"/>
<Button x="100" y="1600" w="70" h="70">
    <Trigger action="click">
       <ProgressCommand mode="3" change="0" amplitude="50"/>
    </Trigger>
</Button>
<Image x="890" y="1600" w="70" h="70" src="addition.png"/>
<Button x="890" y="1600" w="70" h="70">
    <Trigger action="click">
        <ProgressCommand mode="3" change="1" amplitude="50"/>
    </Trigger>
</Button>
```

### 示例应用

```xml
<Text name="t1" color="#ffffff" format="手机版本:%s" paras="#systemVersion" size="50" x="100" y="300"/>
<Var name="pollingTime" time="1"/>
<Var name="deviceTime" assigning="dd天HH小时mm分钟"/>
<Text name="t2" color="#ffffff" format="获取开机时长:%s" paras="#deviceTime" size="50" x="100" y="500"/>
<Var name="processCpuRate" bit="3"/>
<Text name="t3" color="#ffffff" format="获取CPU使用率:%s" paras="#processCpuRate" size="50" x="100" y="700"/>
<Var name="processCpuFree"/>
<Text name="t4" color="#ffffff" format="获取CPU空闲率:%s" paras="#processCpuFree" size="50" x="100" y="800"/>
<Text name="t5" color="#ffffff" format="手机可用空间:%s" paras="#storageFree" size="50" x="100" y="900"/>
<Text name="t6" color="#ffffff" format="手机总空间:%s" paras="#storageTotal" size="50" x="100" y="1000"/>
<Text name="t7" color="#ffffff" format="手电筒开关:%s" paras="#flashlight" size="50" x="100" y="1200"/>
<Button x="100" y="1100" w="300" h="150">
    <Trigger action="click">
        <VariableCommand name="flashlightValue" expression="#flashlightValue+1" persist="false"/>
    </Trigger>
</Button>
<Var name="vibration" expression="0"/>
<Text name="t8" color="#ffffff" format="自动旋转开关:%s" paras="#automaticRotary" size="50" x="100" y="1400"/>
<Button x="100" y="1300" w="300" h="150">
    <Trigger action="click">
        <VariableCommand name="automaticRotaryValue" expression="#automaticRotaryValue+1" persist="false"/>
    </Trigger>
</Button>
<Image x="100" y="1600" w="70" h="70" src="subtraction.png"/>
<Button x="100" y="1600" w="70" h="70">
    <Trigger action="click">
       <ProgressCommand mode="3" change="0" amplitude="50"/>
    </Trigger>
</Button>
<Var name="Progress" direction="0" mode="3" topColor="#550000" bottomColor="#ff0000" bgSrc="jdt.png" iconSrc="hk.png" x="180" y="1605" w="700" h="60" progressWidth="20" iconWidth="60" iconHeight="40" roundedCorners="20"/>
<Image x="890" y="1600" w="70" h="70" src="addition.png"/>
<Button x="890" y="1600" w="70" h="70">
    <Trigger action="click">
        <ProgressCommand mode="3" change="1" amplitude="50"/>
    </Trigger>
</Button>
```