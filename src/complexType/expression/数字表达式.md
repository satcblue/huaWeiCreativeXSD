### 数字表达式功能概述

该功能支持对数值型表达式进行解析，能够在参数中嵌入数值型变量和函数，并返回浮点型数值。同时，该功能可以实时监听全局变量的变化，自动更新表达式的值。支持的操作包括逻辑运算、数学计算、字符串操作等。

**主要特点：**

- 支持逻辑运算和数学计算。
- 支持全局变量和自定义变量的取值。
- 支持字符串操作。
- 当表达式解析的数值超过7位时会有精度问题，建议数值范围在7位及以内。

### 应用场景

1. **控制图片可见性**：例如，根据点击屏幕的次数来切换壁纸，或者根据长轴图片的位移效果制作全景效果。
2. **视频播放与停止控制**：根据某些条件来控制视频的播放或停止。

### 表达式支持的操作

**基本运算**：
- 加法（+）
- 减法（-）
- 乘法（*）
- 除法（/）
- 取模（%）

**支持的函数**：

- **digit(x, n)**：返回数字x的第n位（从右往左，索引从1开始）。
    - 例：`digit(12345, 2) = 4`

- **round(x)**：对值x进行四舍五入。
    - 例：`round(4.5) = 5`

- **int(x)**：取值x的整数部分。
    - 例：`int(4.5) = 4`

- **rand()**：生成0到1之间的随机数。
    - 例：`rand()*10`生成0到9之间的随机整数。

- **条件判断**：
    - **eq(x, y)**：判断x是否等于y。
    - **ne(x, y)**：判断x是否不等于y。
    - **ge(x, y)**：判断x是否大于等于y。
    - **gt(x, y)**：判断x是否大于y。
    - **le(x, y)**：判断x是否小于等于y。
    - **lt(x, y)**：判断x是否小于y。
    - **isnull(x)**：判断变量x是否为空。
    - **not(x)**：判断x是否为0。
    - **ifelse(x, y, z)**：如果x>0，返回y，否则返回z。

- **数学函数**：
    - **pow(x, y)**：计算x的y次方。
    - **len(x)**：计算数字x的位数。
    - **sin(x)**：计算x的正弦值。
    - **cos(x)**：计算x的余弦值。
    - **tan(x)**：计算x的正切值。
    - **asin(x)**：计算x的反正弦值。
    - **acos(x)**：计算x的反余弦值。
    - **atan(x)**：计算x的反正切值。
    - **sqrt(x)**：计算x的平方根。
    - **abs(x)**：计算x的绝对值。
    - **min(x, y)**：返回x和y中的最小值。
    - **max(x, y)**：返回x和y中的最大值。

### XML规范支持

- 支持加减乘除取模括号和函数。
- 支持数组：如`#number[expression]`，索引支持表达式解析。
- 支持全局变量和自定义变量：如`#screen_width`。

### 示例表达式

1. **计算随机数**：`int(rand() * 10 + 5)` 生成5到14之间的随机整数。
2. **判断变量是否为空**：`isnull(#var)` 返回1如果`#var`为空，否则返回0。
3. **条件判断返回值**：`ifelse(eq(#click_count, 5), 1, 0)` 如果点击次数为5，返回1，否则返回0。

以上为数字表达式的功能说明及应用示例，可以根据具体需求在表达式中嵌套使用不同的函数和变量，以实现复杂的计算和逻辑判断。